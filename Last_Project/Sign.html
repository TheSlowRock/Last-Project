<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
    <link rel="stylesheet" href="./style.css">
</head>
<body>







    <div class="container" id="sign-up-form" >
        <div class="title">Sign up!</div>
        <div class="form-group" id="name-number1">
          <label for="name1">Email address</label>
          <input type="email" class="form-control" id="name1" aria-describedby="emailHelp" placeholder="Type username here"> 
          
        </div>
        <div class="form-group" style="padding-top: 10%;" id="">
          <label for="pass1">Password</label>
          <input type="password" class="form-control" id="pass1" placeholder="Type password here">
        </div>

        <button type="submit" id="sign-up-btn" class="btn btn-primary">Sign up</button>
        <div class="small-text btn btn-primary"  id="up-in">Already got an account? Sign in now!</div>
    </div>
    <div class="container" id="sign-in-form">
        <div class="title">Sign in!</div>
        <div class="form-group">
          <label for="name2">Email address</label>
          <input type="email" class="form-control" id="name2" aria-describedby="emailHelp" placeholder="Type username here"> 
          
        </div>
        <div class="form-group" style="padding-top: 10%;">
          <label for="pass2">Password</label>
          <input type="password" class="form-control" id="pass2" placeholder="Type password here">
        </div>

        <button type="submit" id="sign-in-btn" class="btn btn-primary">Sign in</button>
        <div class="small-text btn btn-primary" id="in-up">Don't have an account? Sign up now!</div>

    </div>






    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct" crossorigin="anonymous"></script>
    <script type="module" src="./authentication.js">
    </script>
    <script src="./Sign.js"></script>
    <script type="module" src="./realtimedtb.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.9.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.9.1/firebase-database.js"></script>
    <!-- ----------------------------------------------------------------------------------------------------------------------- -->
     <!-- -----------------------------------REALTIME_DTB----------------------------------------------------------------------- -->
      <!-- --------------------------------------------------------------------------------------------------------------------- -->
     <script>
      const firebaseConfig = {
    apiKey: "AIzaSyDWNDcD0xKb99rfuib5sP69RXNmNEmzjlo",
    authDomain: "lastproject-32295.firebaseapp.com",
    projectId: "lastproject-32295",
    storageBucket: "lastproject-32295.appspot.com",
    messagingSenderId: "222850851655",
    appId: "1:222850851655:web:066df51c40c5bbc0346262",
    measurementId: "G-XJQRXXJGQW"
  };

  // Initialize Firebase
  firebase.initializeApp(firebaseConfig)
  const db = firebase.database()

  function register(){
    var email = document.getElementById('name1').value
    var pass = document.getElementById('pass1').value
      
      db.ref('users').push({
          name: email,
          pass : pass,
      }, (error) => {
          if(error)  {
              console.error('Error adding document: ', error)
              alert('Failed to register user, Please try again')
          } else {
              console.log("Registered")
              alert('User registered successfully')
              document.getElementById('sign-up-form').style.marginTop = '-100%'
              document.getElementById('sign-in-form').style.marginTop = '5%'
          }
      
      })

  }
  document.getElementById("sign-up-btn").addEventListener("click", register);

     </script>
     <!-- ---------------------------------------------------------------------------------------------------------- -->
      <!-- -----------------------------MOVING OBJECTS-------------------------------------------------------------- -->
       <!-- -------------------------------------------------------------------------------------------------------- -->
      <script>
        

document.getElementById('up-in').addEventListener('click',function(){
    document.getElementById('sign-up-form').style.marginTop = '-100%'
    document.getElementById('sign-in-form').style.marginTop = '5%'
})
document.getElementById('in-up').addEventListener('click',function(){
    document.getElementById('sign-in-form').style.marginTop = '-100%'
    document.getElementById('sign-up-form').style.marginTop = '5%'
})
      </script>
    <!-- ----------------------------------------------------------------------------------------------------------- -->
     <!-- --------------------------AUTHENTICATION------------------------------------------------------------------ -->
      <!-- --------------------------------------------------------------------------------------------------------- -->
       <script>
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.0/firebase-app.js";
        import {
          getAuth,
          signInWithEmailAndPassword,
          createUserWithEmailAndPassword,
        } from "https://www.gstatic.com/firebasejs/9.6.0/firebase-auth.js";
    

        // function signUp(){
         
           
            
        //     db.ref('users').push({
        //         name: email,
        //         age : pass,
                
        //     }, (error) => {
        //         if(error)  {
        //             console.error('Error adding document: ', error)
        //             alert('Failed to register user, Please try again')
        //         } else {
        //             console.log("Registered")
        //             alert('User registered successfully')
        //             window.location.href = './homepage.html'
        //         }
            
        //     })

        // }
        function signIn(){
            var email = document.getElementById('name2').value;
            var pass= document.getElementById('pass2').value;
            signInWithEmailAndPassword(auth, email, pass)
                .then((userCredential) => {
                    var user = userCredential.user
                    console.log(user)
                    alert('Logined successfully')
                    
                })
                .catch(error => {
                    var errorCode = error.errorCode
                    var errorMessage = error.message
                    console.error(errorMessage)
                    var Uppercased = false
                    var Lowercased = false
                    var Specialletter = '/[!@#$%^&*(),.?":{}|<>];'
                    var Spletter = false
                    
                    for (let i = 0; i < pass.length; i++) {
                        console.log(pass[i]);
                        if (email.length < 6) {
                            alert('Username must have at least 6 letters');
                            break;
                        } else if (pass.length < 8) {
                            alert('Password must have at least 8 letters');
                            break;
                        }
                        if (pass[i] === pass[i].toUpperCase()) {
                            Uppercased = true;
                            // This condition will always be false since it's within the 'if' where Uppercased is set to true.
                            // The check for Uppercased should be outside the for loop.
                        }
                        if (pass[i] === pass[i].toLowerCase()) {
                            Lowercased   = true;
                            // This condition will always be false since it's within the 'if' where Uppercased is set to true.
                            // The check for Uppercased should be outside the for loop.
                        }
                        if (Specialletter.includes(pass[i])){
                            Spletter =true
                        }
                        }

                        // Check if there was no uppercase letter in the password after the loop.
                        if (!Uppercased) {
                            alert('Password must have at least 1 uppercase letter');
                            console.log(pass);
                        }
                        if (!Lowercased) {
                            alert('Password must have at least 1 lowercase letter');
                            console.log(pass);
                        }
                        if(!Spletter){
                            alert('Password must have at least 1 special letter')
                            console.log(pass)
                        }
                                            
                })
        }
    
        const app = initializeApp(firebaseConfig);
        const auth = getAuth();
       
    
        document.getElementById("sign-in-btn").addEventListener("click", signIn);



         
      


       </script>
</body>
</html>

